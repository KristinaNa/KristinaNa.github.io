<!DOCTYPE html>
<html>
<head>
  <script>
    window.getGliaContext = function() {
      return {
        sessionId: "some_unique_session_ID",
        idToken: "eyJraWQiOiIxMjMiLCJhbGciOiJFUzI1NiJ9.eyJlbWFpbCI6ImphbmUuZG9lQGVtYWlsLmNvbSIsIm5hbWUiOiJKYW5lIERvZSIsImdpdmVuX25hbWUiOiJKYW5lIiwiZmFtaWx5X25hbWUiOiJEb2UiLCJzdWIiOiJqYW5lLmRvZUBlbWFpbC5jb206SmFuZURvZSIsImxvb2t1cF9pZCI6ImphbmUuZG9lIiwiaWF0IjoxNzY0Njg3MTg4LCJleHAiOjE3NjQ2OTA3ODh9.oGJMwUknTJgp4Ybz4GG5A9tKU3ba7ufK96mHgyDXlQcQu50Z6rfhGmm8eXF8tHDQEihfHCFxMDcHg5iHV3jGmw"
      }
    }
    window.addEventListener('message', (event) => {
      if (event.data.type === 'VISITOR_ID_RESPONSE') {
        console.log("GITHUB LOG: VISITOR_ID_RESPONSE", event);
  
        // console.log('Received Visitor ID:', event.data.value);
        // Ensure window.sm exists before assigning to avoid errors
        window.sm = window.sm || {};
        window.sm.visitorId = event.data.value;
      }
    });

    console.log("GITHUB LOG: post message");
    window.parent.postMessage({
      type: 'REQUEST_VISITOR_ID'
    }, event.origin);

    window.addEventListener('message', (event) => {
      if (event.data.type === 'REQUEST_VISITOR_ID') {
        console.log("GITHUB LOG: REQUEST_VISITOR_ID", event);

        event.source.postMessage({
          type: 'VISITOR_ID_RESPONSE',
          value: window.sm.visitorId
        }, event.origin);
      }
    });
    
  </script>
  <script async src="https://api.kristina-nassonenko.dev.samo.io/salemove_integration.js?site_id=2271f1c5-29a0-491d-8ded-6c0e17e1cd11"></script>
  <title>My GitHub Pages Site</title>
</head>
<body>
  <h1>Hello World!</h1>
  <p>This is my first site hosted on GitHub Pages.</p>
</body>
</html>
